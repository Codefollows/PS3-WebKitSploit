

<script>
 var mydb = openDatabase("Testdb", "0.1", "Testing  Database", 1024 * 1024);
if (window.openDatabase) {
  //Create the database the parameters are 1. the database name 2.version number 3. a description 4. the size of the database (in bytes) 1024 x 1024 = 1MB


  //create the  table using SQL for the database using a transaction
  mydb.transaction(function(t) {
    t.executeSql("CREATE TABLE IF NOT EXISTS mydb (id INTEGER PRIMARY KEY, value1 VARCHAR(50), value2 VARCHAR(50), value3 VARCHAR(100))");
  });

} else {
  alert("WebSQL is not supported by your browser!");
}


function updateDrafts(transaction, results) {
  var listitems = "";
  var listholder = document.getElementById("drafts");

  listholder.innerHTML = "";

  var i;
  for (i = 0; i < results.rows.length; i++) {
    var row = results.rows.item(i);

    listholder.innerHTML += "<li>" + row.value1 + " - " + row.value2 + " - " + row.value3 + "(<a href='javascript:void(0);' onclick='deleteDraft(" + row.id + ");'>Delete Draft</a>)";
  }
}


function outputDrafts() {
  if (mydb) {
    mydb.transaction(function(t) {
      t.executeSql("SELECT * FROM mydb", [], updateDrafts);
    });
  } else {
    alert("db not found, your browser does not support web sql!");
  }
}

function addDraft() {
  if (mydb) {
    var value1 = document.getElementById("value1").value;
    var value2 = document.getElementById("value2").value;
    var value3 = document.getElementById("value3").value;

    if (value1 !== "" && value2 !== "" && value3 !== "") {
      mydb.transaction(function(t) {
        t.executeSql("INSERT INTO mydb (value1, value2, value3) VALUES (?, ?, ?)", [value1, value2, value3]);
        outputDrafts();
      });
    } else {
      alert("You must enter all values!");
    }
  } else {
    alert("db not found, your browser does not support web sql!");
  }
}
//function to remove a car from the database, passed the row id as it's only parameter

function deleteDraft(id) {
  //check to ensure the mydb object has been created
  if (mydb) {
    //Get all the cars from the database with a select statement, set outputCarList as the callback function for the executeSql command
    mydb.transaction(function(t) {
      t.executeSql("DELETE FROM mydb WHERE id=?", [id], outputDrafts);
    });
  } else {
    alert("db not found, your browser does not support web sql!");
  }
}

outputDrafts();
var link = document.getElementById("addvalue");

link.onclick = function () { alert(1) 
addDraft();
};
</script>


<div id="controls">
  <p>Save drafts to the database</p>
  <label>Value #1: </label>
  <input type="text" id="value1" />
  <br />
  <label>Value #2: </label>
  <input type="text" id="value2" />
  <br />
  <label>Value #3: </label>
  <input type="text" id="value3" />
  <br />
  <button type="button" id="addvalue">Save as draft</button>
</div>
<div id="listholder">
  <h3>Your saved drafts</h3>
  <ul id="drafts">
  </ul>
</div>

